<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>PlexAuth — Sign In</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="app-base-url" content="{{ .BaseURL }}">
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body class="bg">
  <main class="center">
    <section class="card">
      <div class="brand">
        <!-- You can swap this for your logo -->
        <svg viewBox="0 0 24 24" aria-hidden="true" class="logo"><path d="M3 3h18v18H3z" fill="#111827"/><path d="M9 6l7 6-7 6V6z" fill="#f59e0b"/></svg>
        <h1>PlexAuth</h1>
        <p class="muted">Sign in with your Plex account to continue</p>
      </div>

      <div style="display: flex; justify-content: center; align-items: center">
	  <button id="startBtn" class="plex-btn" center>
        <img src="/static/login.svg" alt="Plex Logo" class="plex-logo">
        Sign in with Plex
      </button>
	  </div>

      <p class="footnote">
        You’ll be redirected to <a href="https://plex.tv/link" target="_blank" rel="noopener">https://plex.tv/link</a> to complete sign-in.
      </p>
    </section>
  </main>

  <!-- Modal shown after click -->
  <div id="modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="m-title">
    <div class="modal-card">
      <h2 id="m-title">Complete sign-in</h2>
      <p class="muted">We opened <a href="https://plex.tv/link" target="_blank" rel="noopener">https://plex.tv/link</a> in a new tab and copied your code.</p>

      <div class="code-wrap">
        <span id="codeDisplay" class="code">----</span>
        <button id="copyBtn" class="btn small">Copy</button>
      </div>

      <div class="progress">
        <span class="spinner" aria-hidden="true"></span>
        <span id="status">Waiting for you to finish linking in Plex…</span>
      </div>

      <div class="row">
        <a id="openLink" class="btn ghost" href="https://plex.tv/link" target="_blank" rel="noopener">
          Open plex.tv/link
        </a>
        <button id="cancelBtn" class="btn ghost">Cancel</button>
      </div>
    </div>
  </div>

  <script src="/static/login.js" defer></script>
</body>
</html>